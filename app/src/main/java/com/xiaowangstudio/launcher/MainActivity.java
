package com.xiaowangstudio.launcher;

import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;
import androidx.appcompat.app.AppCompatActivity;
import java.io.File;

public class MainActivity extends AppCompatActivity {

    private TextView console;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        console = findViewById(R.id.console);

        createModsAndShaderFolders();

        Button btnStartGame = findViewById(R.id.btn_start_game);
        Button btnDownloadVersion = findViewById(R.id.btn_download_version);
        Button btnAiDiagnosis = findViewById(R.id.btn_ai_diagnosis);
        Button btnSettings = findViewById(R.id.btn_settings);

        btnStartGame.setOnClickListener(v -> {
            log("正在启动我的世界...");
            Toast.makeText(this, "启动中", Toast.LENGTH_SHORT).show();
        });

        btnDownloadVersion.setOnClickListener(v -> {
            log("打开版本下载界面");
        });

        btnAiDiagnosis.setOnClickListener(v -> {
            log("正在扫描模组与光影...");
        });

        btnSettings.setOnClickListener(v -> {
            log("打开设置界面");
        });

        log("小王工作室MC启动器 启动成功");
    }

    private void log(String text) {
        runOnUiThread(() -> {
            console.append(text + "\n");
        });
    }

    private void createModsAndShaderFolders() {
        File modsFolder = new File(getExternalFilesDir(null), "mods");
        File shaderFolder = new File(getExternalFilesDir(null), "shaderpacks");

        if (!modsFolder.exists()) {
            modsFolder.mkdirs();
            log("mods 文件夹已创建");
        }
        if (!shaderFolder.exists()) {
            shaderFolder.mkdirs();
            log("shaderpacks 文件夹已创建");
        }
    }
}
